<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>＝LOVE齋藤樹愛羅　非公式 沼落ちガイド</title>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#ffb7c5', // light pink (Kiara's member color)
                        secondary: '#fff0f5', // lavender blush
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #f9fafb;
            /* gray-50 */
        }

        /* Hide scrollbar for Chrome, Safari and Opera */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        /* Hide scrollbar for IE, Edge and Firefox */
        .scrollbar-hide {
            -ms-overflow-style: none;
            /* IE and Edge */
            scrollbar-width: none;
            /* Firefox */
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const DATA = [];

        const CATEGORIES = ["すべて", "MV", "ライブ", "歌ってみた", "踊ってみた", "フォーカス", "バラエティ"];
        const TAGS = ["カッコいい", "かわいい", "アイドル", "切ない"];

        const getYouTubeId = (url) => {
            try {
                const urlObj = new URL(url);
                if (urlObj.hostname === "youtu.be") {
                    return urlObj.pathname.slice(1);
                }
                const v = urlObj.searchParams.get("v");
                if (v) return v;
                // Handle cases like embed URLs if necessary, but current data is standard
                return null;
            } catch (e) {
                return null;
            }
        };

        const App = () => {
            const [activeCategory, setActiveCategory] = useState("すべて");
            const [activeTag, setActiveTag] = useState(null);
            const [showUnwatchedOnly, setShowUnwatchedOnly] = useState(false);
            const [sortOrder, setSortOrder] = useState("desc"); // 'desc' | 'asc'

            // Watched status state
            const [watchedIds, setWatchedIds] = useState(() => {
                const saved = localStorage.getItem('kiara_watchedIds');
                return saved ? JSON.parse(saved) : [];
            });

            // Toggle watched status
            const toggleWatched = (id) => {
                setWatchedIds(prev => {
                    if (!prev.includes(id)) {
                        const updated = [...prev, id];
                        localStorage.setItem('kiara_watchedIds', JSON.stringify(updated));
                        return updated;
                    }
                    return prev;
                });
            };

            // Helper to check if watched
            const isWatched = (id) => watchedIds.includes(id);

            // Calculate Numaochido
            const watchedPercentage = DATA.length > 0 ? Math.round((watchedIds.length / DATA.length) * 100) : 0;

            const filterByCategory = (item) => {
                if (activeCategory === "すべて") return true;
                return item.category === activeCategory;
            };

            const filterByTag = (item) => {
                if (!activeTag) return true;
                return item.tags && item.tags.includes(activeTag);
            };

            const filterByUnwatched = (item) => {
                if (!showUnwatchedOnly) return true;
                return !watchedIds.includes(item.id);
            };

            const filteredData = DATA
                .filter(filterByCategory)
                .filter(filterByTag)
                .filter(filterByUnwatched)
                .sort((a, b) => {
                    if (a.year !== b.year) {
                        return sortOrder === 'asc' ? a.year - b.year : b.year - a.year;
                    }
                    return a.title.localeCompare(b.title, 'ja');
                });

            return (
                <div className="min-h-screen bg-white w-full max-w-md md:max-w-7xl mx-auto shadow-2xl flex flex-col border-x border-gray-100 my-0 md:my-8 md:rounded-3xl overflow-hidden transition-all duration-300">
                    {/* Header */}
                    <header className="bg-primary text-white p-6 text-center shadow-md z-10 relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-full bg-white opacity-10 transform scale-150 rotate-12 origin-top-left pointer-events-none"></div>

                        {/* Numaochido Gauge */}
                        <div className="absolute top-4 right-4 z-20 flex flex-col items-end">
                            <span className="text-[10px] font-bold opacity-90 mb-1">沼落ち度</span>
                            <div className="flex items-center gap-2">
                                <div className="w-20 md:w-32 h-2.5 bg-black/20 rounded-full overflow-hidden backdrop-blur-sm border border-white/10">
                                    <div
                                        className="h-full bg-gradient-to-r from-yellow-300 to-yellow-500 shadow-[0_0_10px_rgba(253,224,71,0.6)] transition-all duration-1000 ease-out"
                                        style={{ width: `${watchedPercentage}%` }}
                                    ></div>
                                </div>
                                <span className="text-sm font-bold tabular-nums">{watchedPercentage}%</span>
                            </div>
                        </div>

                        <h1 className="text-2xl font-bold tracking-wider relative z-10"><span className="text-lg">＝LOVE</span>齋藤樹愛羅<br /><span className="text-sm font-normal opacity-90 block mt-1">非公式 沼落ちガイド</span></h1>
                    </header>

                    {/* Filter & Sort Controls */}
                    <div className="sticky top-0 bg-white/95 backdrop-blur-sm z-20 border-b border-gray-100 p-4 shadow-sm space-y-3">
                        <div className="flex flex-col gap-4">
                            {/* Category Buttons */}
                            <div className="flex flex-wrap gap-2">
                                {CATEGORIES.map(cat => (
                                    <button
                                        key={cat}
                                        onClick={() => setActiveCategory(cat)}
                                        className={`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all duration-300 transform ${activeCategory === cat
                                            ? "bg-primary text-white shadow-lg scale-105 ring-2 ring-primary ring-offset-2"
                                            : "bg-gray-100 text-gray-500 hover:bg-gray-200 hover:text-gray-700"
                                            }`}
                                    >
                                        {cat}
                                    </button>
                                ))}
                            </div>

                            {/* Tag Filters */}
                            <div className="flex flex-wrap gap-1.5">
                                {TAGS.map(tag => (
                                    <button
                                        key={tag}
                                        onClick={() => setActiveTag(activeTag === tag ? null : tag)}
                                        className={`px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all duration-300 border ${activeTag === tag
                                            ? "bg-gray-800 text-white border-gray-800 shadow-md"
                                            : "bg-white text-gray-600 border-gray-200 hover:bg-gray-50 hover:border-gray-300"
                                            }`}
                                    >
                                        <span className="mr-1">#</span>{tag}
                                    </button>
                                ))}
                            </div>

                            {/* Sort & Filter Control */}
                            <div className="flex flex-wrap justify-between items-center gap-4 text-xs text-gray-500 whitespace-nowrap">
                                {/* Unwatched Filter */}
                                <button
                                    onClick={() => setShowUnwatchedOnly(!showUnwatchedOnly)}
                                    className={`px-4 py-2 rounded-full font-bold transition-all duration-300 border flex items-center gap-2 ${showUnwatchedOnly
                                        ? "bg-gray-800 text-white border-gray-800 shadow-md"
                                        : "bg-white text-gray-500 border-gray-200 hover:bg-gray-50 hover:border-gray-300"
                                        }`}
                                >
                                    <span className={`w-2 h-2 rounded-full ${showUnwatchedOnly ? 'bg-green-400' : 'bg-gray-300'}`}></span>
                                    未視聴のみ
                                </button>

                                <div className="flex items-center gap-2">
                                    <span>公開年:</span>
                                    <div className="flex bg-gray-100 rounded-lg p-1">
                                        <button
                                            onClick={() => setSortOrder('asc')}
                                            className={`px-3 py-1 rounded-md transition-all ${sortOrder === 'asc' ? 'bg-white text-primary shadow-sm font-bold' : 'hover:bg-gray-200'}`}
                                        >
                                            昇順
                                        </button>
                                        <button
                                            onClick={() => setSortOrder('desc')}
                                            className={`px-3 py-1 rounded-md transition-all ${sortOrder === 'desc' ? 'bg-white text-primary shadow-sm font-bold' : 'hover:bg-gray-200'}`}
                                        >
                                            降順
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Content List */}
                    <main className="flex-1 p-4 md:p-6 bg-gray-50/50">
                        {filteredData.length > 0 ? (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                {filteredData.map(item => {
                                    const videoId = getYouTubeId(item.url);
                                    const thumbnailUrl = videoId ? `https://img.youtube.com/vi/${videoId}/hqdefault.jpg` : null;
                                    const watched = isWatched(item.id);

                                    return (
                                        <div key={item.id} className={`group bg-white rounded-2xl border ${watched ? 'border-primary/30 bg-purple-50/30' : 'border-gray-100'} shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden transform hover:-translate-y-1 h-full flex flex-col`}>
                                            {thumbnailUrl && (
                                                <div className="relative aspect-video w-full overflow-hidden">
                                                    <img
                                                        src={thumbnailUrl}
                                                        alt={item.title}
                                                        className={`w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ${watched ? 'grayscale-[30%]' : ''}`}
                                                    />
                                                    <div className="absolute inset-0 bg-black/10 group-hover:bg-black/0 transition-colors duration-300"></div>
                                                    {watched && (
                                                        <div className="absolute top-2 right-2 bg-primary text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-md z-10 flex items-center gap-1">
                                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                                                                <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                                                            </svg>
                                                            視聴済み
                                                        </div>
                                                    )}
                                                </div>
                                            )}
                                            <div className="p-6 flex flex-col flex-grow">
                                                <div className="flex items-center justify-between mb-3">
                                                    <div className="flex gap-2">
                                                        <span className={`text-[10px] font-bold px-3 py-1 rounded-full text-white uppercase tracking-wider ${item.category === 'MV' ? 'bg-gradient-to-r from-pink-500 to-rose-500' :
                                                            item.category === 'ライブ' ? 'bg-gradient-to-r from-blue-500 to-indigo-500' :
                                                                item.category === '歌ってみた' ? 'bg-gradient-to-r from-purple-500 to-violet-500' :
                                                                    item.category === '踊ってみた' ? 'bg-gradient-to-r from-orange-500 to-amber-500' :
                                                                        item.category === 'フォーカス' ? 'bg-gradient-to-r from-yellow-500 to-amber-500' :
                                                                            'bg-gray-500'
                                                            }`}>
                                                            {item.category}
                                                        </span>
                                                        <span className="text-[10px] font-bold px-3 py-1 rounded-full text-gray-500 bg-gray-100 border border-gray-200">
                                                            {item.year}年
                                                        </span>
                                                    </div>
                                                </div>

                                                {/* Tags */}
                                                {item.tags && item.tags.length > 0 && (
                                                    <div className="flex flex-wrap gap-1 mb-2">
                                                        {item.tags.map(tag => (
                                                            <span key={tag} className="text-[10px] text-gray-500 bg-gray-100 px-2 py-0.5 rounded-md">
                                                                #{tag}
                                                            </span>
                                                        ))}
                                                    </div>
                                                )}

                                                <h3 className={`text-xl font-bold mb-3 leading-tight group-hover:text-primary transition-colors line-clamp-2 ${watched ? 'text-gray-500' : 'text-gray-800'}`}>
                                                    {item.title}
                                                </h3>
                                                <div className="relative mb-5 flex-grow">
                                                    <div className={`absolute top-0 left-0 w-1 h-full rounded-full ${watched ? 'bg-gray-300' : 'bg-primary/30'}`}></div>
                                                    <p className="text-sm text-gray-600 pl-4 py-1 italic leading-relaxed line-clamp-5">
                                                        {item.comment}
                                                    </p>
                                                </div>

                                                <a
                                                    href={item.url}
                                                    target="_blank"
                                                    rel="noopener noreferrer"
                                                    onClick={() => toggleWatched(item.id)}
                                                    className={`block w-full text-center border-2 font-bold py-3 rounded-xl transition-all duration-300 flex items-center justify-center gap-2 group-hover:shadow-lg mt-auto ${watched
                                                        ? "bg-secondary border-primary/50 text-primary hover:bg-primary hover:text-white"
                                                        : "bg-white border-primary text-primary hover:bg-primary hover:text-white"
                                                        }`}
                                                >
                                                    {watched ? (
                                                        <>
                                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clipRule="evenodd" />
                                                            </svg>
                                                            もう一度見る
                                                        </>
                                                    ) : (
                                                        <>
                                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clipRule="evenodd" />
                                                            </svg>
                                                            動画を見る
                                                        </>
                                                    )}
                                                </a>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        ) : (
                            <div className="text-center py-16 px-4">
                                <div className="bg-gray-50 rounded-full h-20 w-20 flex items-center justify-center mx-auto mb-4 text-gray-300">
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                                    </svg>
                                </div>
                                <h3 className="text-lg font-bold text-gray-400 mb-1">コンテンツ準備中</h3>
                                <p className="text-sm text-gray-400">このカテゴリーのコンテンツは<br />まだありません</p>
                            </div>
                        )}
                    </main>

                    {/* Footer */}
                    <footer className="p-6 text-center text-[10px] text-gray-400 border-t border-gray-100 bg-gray-50 space-y-2">
                        <p>当サイトは=LOVEのファンによる非公式サイトであり、使用している動画・画像の権利は全て権利者様に帰属します。<br className="hidden md:inline" />問題がある場合は速やかに削除いたします。</p>
                        <p>© 2024 Kiara Saito Fan App MVP</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>